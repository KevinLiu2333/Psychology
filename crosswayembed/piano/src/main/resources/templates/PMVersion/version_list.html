<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>克洛斯威钢琴端后台管理系统</title>
    <link rel="stylesheet" href="/css/bootstrap.css"/>
    <link rel="stylesheet" href="/css/css.css"/>
    <link href="/css/zzsc.css" type="text/css" rel="stylesheet"/>
    <script src="/js/jquery-1.3.2.js" type="text/javascript"></script>
    <script type="text/javascript">
       /*  $(function () {
            $(".subNav").click(function () {
                $(this).toggleClass("currentDd").siblings(".subNav").removeClass("currentDd")
                $(this).toggleClass("currentDt").siblings(".subNav").removeClass("currentDt")

                // 修改数字控制速度， slideUp(500)控制卷起速度
                $(this).next(".navContent").slideToggle(500).siblings(".navContent").slideUp(500);
            })
        }) */
        
        $(function(){
        	var forceOptions = $(".isForceUpGrade");
        	var showOptions = $(".isShowinversionlist");
        	var testOptions = $(".istestversion");
        	
        	/***************  强制升级控制     ***************/
			for(var i=0;i<forceOptions.length;i++) {
				var isForceUpGrade = forceOptions.eq(i);
				if(isForceUpGrade.val() == "") {
					isForceUpGrade.next().children().eq(0).attr("selected","selected");
				}
			}
        	
        	/***************  列表显示控制     ***************/
        	for(var i=0;i<showOptions.length;i++) {
				var isShowInVersionList = showOptions.eq(i);
				if(isShowInVersionList.val() == "") {
					isShowInVersionList.next().children().eq(0).attr("selected","selected");
				}
			}
        	
        	/***************  测试版本控制     ***************/
        	for(var i=0;i<testOptions.length;i++) {
				var isTest = testOptions.eq(i);
				if(isTest.val() == "") {
					isTest.next().children().eq(0).attr("selected","selected");
				}
			}
        	
        	/***************  进入添加版本控制     ***************/
        	$("#toAddVersion").click(function(){
        		window.location.href = "/PMVersion/toAddVersion";
        	});
        	
        	/***************  页面进行跳转控制     ***************/
            $("#goto").click(function () {
                var gotopage = $("#gotopage").val();
                var totalpage = $("#totalpage").val();
                if (gotopage == "") {
                    alert("请您输入数字");
                    return;
                }
                if (!/^[0-9]*$/.test(gotopage) || gotopage == 0) {
                    alert("非法输入");
                    return;
                }
                if (gotopage > totalpage) {
                    alert("您输入的数字超过总页数");
                    return;
                }
                window.location.href = "/PMVersion/versionList?pageId=" + gotopage;
            });
        })
        
    </script>
</head>

<body>
<!-- 顶部 -->
<div th:include="common/head"></div>
<div id="middle">
    <div th:include="common/left"></div>

    <div class="right" id="mainFrame">

        <div class="right_cont">
        	<input type="hidden" id="totalpage"
                   th:value="${versionList.pages}" th:if="${versionList}"/>
            <ul class="breadcrumb" th:text="当前位置：系统版本列表"></ul>
            <div class="serch_right" style=" padding:20px 0;">
            <input id="toAddVersion" type="button" value="添加版本+" class="btn btn-info "
                         style="width:80px; float:left; "/>
            </div>
            <table class="table table-bordered table-striped table-hover">
                <tbody>
                <tr align="center">
                    <th width="10%" nowrap="nowrap">版本号</th>
                    <th width="10%" nowrap="nowrap">应用平台</th>
                    <th width="5%" nowrap="nowrap">直升号</th>
                    <th width="10%" nowrap="nowrap">更新日期</th>
                    <th width="17%" nowrap="nowrap">更新包位置</th>
                    <th width="7%" nowrap="nowrap">文件大小</th>
                    <th width="7%" nowrap="nowrap">强制升级</th>
                    <th width="7%" nowrap="nowrap">在嵌入式网站显示</th>
                    <th width="7%" nowrap="nowrap">仅供测试版本</th>
                    <th width="8%" nowrap="nowrap">更新内容</th>
                    <th width="12%" nowrap="nowrap">操作</th>
                </tr>
                <tr align="center" th:each="tbVersion:${versionList.list}" th:if="${versionList}">
                    <td nowrap="nowrap" th:text="${tbVersion.versionno}">2016102400</td>
                    <td nowrap="nowrap" th:text="${tbVersion.versionplatform}">Embedded</td>
                    <td nowrap="nowrap" th:text="${tbVersion.versionupgradeno}">3</td>
                    <td nowrap="nowrap" th:text="${#dates.format(tbVersion.versiondate,'yyyy-MM-dd')}">2016-10-24</td>
                    <td nowrap="nowrap" th:text="${tbVersion.versionpath}">/static/PM/upgrade/2016102400/upgrade.pkg</td>
                    <td nowrap="nowrap" th:text="${tbVersion.versionsize}">118MB</td>
                    <td nowrap="nowrap">
                    	<input type="hidden" class="isForceUpGrade" th:value="${tbVersion.isforceupgrade}" />
                        <select name="" style=" width:70px; height:30px;" disabled="disabled">
                            <option value="">未设置</option>
                            <option value="true" th:selected="${tbVersion.isforceupgrade}">True</option>
                            <option value="false" th:selected="not ${tbVersion.isforceupgrade}">False</option>
                        </select>
                    </td>
                    <td nowrap="nowrap">
                    	<input type="hidden" class="isShowinversionlist" th:value="${tbVersion.isshowinversionlist}" />
                        <select name="" style=" width:70px; height:30px;" disabled="disabled">
                            <option value="">未设置</option>
                            <option value="true" th:selected="${tbVersion.isshowinversionlist}">True</option>
                            <option value="false" th:selected="not ${tbVersion.isshowinversionlist}">False</option>
                        </select>
                    </td>
                    <td nowrap="nowrap">
                    	<input type="hidden" class="istestversion" th:value="${tbVersion.istestversion}" />
                        <select name="" style=" width:70px; height:30px;" disabled="disabled">
                            <option value="">未设置</option>
                            <option value="true" th:selected="${tbVersion.istestversion}">True</option>
                            <option value="false" th:selected="not ${tbVersion.istestversion}">False</option>
                        </select>
                    </td>
                    <td nowrap="nowrap" th:text="${tbVersion.versiondescription}">generic</td>
                    <td nowrap="nowrap">
	                    <a th:href="'/PMVersion/deleteVersion?id='+${tbVersion.versionid}">删除</a>&nbsp;&nbsp;
	                    <!-- <a th:href="'/PMVersion/editVersion?id='+${tbVersion.versionid}">编辑</a>&nbsp;&nbsp; -->
	                    <a th:href="'/PMVersion/toMdyVersion?id='+${tbVersion.versionid}">修改</a>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="fan">
	            <a th:href="'/PMVersion/versionList?pageId='+${versionList.firstPage}">首页</a>&nbsp;&nbsp;&nbsp;
	            <a th:href="'/PMVersion/versionList?pageId='+${versionList.isFirstPage?versionList.firstPage:versionList.pageNum-1}">上一页</a>&nbsp;&nbsp;&nbsp;
	            <a th:href="'/PMVersion/versionList?pageId='+${versionList.isLastPage?versionList.lastPage:versionList.pageNum+1}">下一页</a>&nbsp;&nbsp;&nbsp;
	            <a th:href="'/PMVersion/versionList?pageId='+${versionList.lastPage}">尾页</a>&nbsp;&nbsp;&nbsp;
	                          页次：<span th:text="${versionList.pageNum}+'/'+${versionList.pages}">1/1</span>&nbsp;&nbsp;&nbsp;
	                          转到：<input id="gotopage" name="" type="text" class="fan_text"/>&nbsp;页&nbsp;&nbsp;&nbsp;
	            <input id="goto" name="" type="button" value="GO"/>
            </div>
        </div>
    </div>
</div>
</body>
</html>
