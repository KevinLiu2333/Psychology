<?xml version="1.0" encoding="UTF-8"?>

<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.wondersgroup.com wdis.xsd">
  <index id="hugeIndex" name="大数据索引" default="true" abstract="false">
    <path>D:\projects\wdisearch\index\huge</path>
    <analyzer impl="com.wondersgroup.sh.search.analysis.CJKDigitLengthAnalyzerFactory"/>
    <QueryParser defaultOperator="AND"/>
    <fields>
      <field name="STUDENT_ID"   index="UN_TOKENIZED"    store="YES" termVector="NO" id="true"  />
      <field name="STUDENT_NAME" index="UN_TOKENIZED"    store="YES" termVector="NO" default="true"/>
      <field name="GRADE"        index="UN_TOKENIZED"    store="YES" termVector="YES" />
      <field name="MEMO"         index="TOKENIZED"       store="YES" termVector="YES" analyzer="com.wondersgroup.sh.search.analysis.CJKDigitLengthAnalyzerFactory"/>
      <field name="AGE"          index="UN_TOKENIZED"    store="YES" termVector="NO"/>
      <field name="GENDER"       index="UN_TOKENIZED"    store="YES" termVector="NO" />
    </fields>
  </index>
  
  <datasource id="shnew">
    <property name="url">jdbc:oracle:thin:@10.168.105.48:1521:48_FDJBO</property>
    <property name="password">fj</property>
    <property name="driverClassName">com.dingl.jdbc.CommonDriver</property>
    <property name="username">fj</property>
  </datasource>
  
  <fetcher id="fetcher_0" type="DB" xsi:type="dbFetcherType">
    <index ref="hugeIndex"/>
    <datasource ref="shnew"/>
    <table name="FJ_STUDENT">
      <fields>
        <field name="STUDENT_ID"/>
        <field name="STUDENT_NAME"/>
        <field name="GRADE"/>
        <field name="AGE"/>
        <field name="MEMO"/>
        <field name="GENDER"/>
      </fields>
    </table>
    <eraser impl="com.wondersgroup.sh.search.erase.DefaultLuceneEraser">
      <params>
        <param name="values">fetcher_0</param>
        <param name="fields">FUNCTION_NAME</param>
      </params>
    </eraser>
    <task id="fetcher-task">
      <task-class>com.wondersgroup.sh.search.task.FullRefreshIndexWithTimestampTask</task-class>
      <params>
        <param name="timestampField">LAST_UPDATE_TIME</param>
      </params>
    </task>
  </fetcher>
  
</config>
