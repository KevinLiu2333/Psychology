<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>添加管理员</title>
<link rel="stylesheet" href="/css/bootstrap.css" />
<link rel="stylesheet" href="/css/css.css" />
<link href="/css/zzsc.css" type="text/css" rel="stylesheet">
<script src="/js/jquery-1.3.2.js" type="text/javascript"></script>
<script src="/js/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
	$(function(){
		$(".subNav").click(function(){
					$(this).toggleClass("currentDd").siblings(".subNav").removeClass("currentDd");
					$(this).toggleClass("currentDt").siblings(".subNav").removeClass("currentDt");
					
				/*	// 修改数字控制速度， slideUp(500)控制卷起速度
					$(this).next(".navContent").slideToggle(500).siblings(".navContent").slideUp(500);*/
			});
		
		$(".role_list").css("display","none");
		$(".role_list").first().css("display","block");
		
		var currentPosition = $(".breadcrumb").text();
		if(currentPosition == "当前位置：修改管理员") {
			var userName = $("#managername").val();
			$("#userName").val(userName);
			$("#userName").attr("readonly","readonly");
			$("#inputPassword").css("display","none");
			$("#enterPassword").css("display","none");
			var roleName = $("#roleid").val();
			var options = $("#roleName option");
			for(var i=0;i<options.length;i++) {
				if(options.eq(i).text() == roleName) {
					options.eq(i).attr("selected",true);
					break;
				}
			}
			var divs = $(".role_list");
			var div;
			for(var i=0;i<divs.length;i++) {
				div = divs.eq(i);
				var role2 = div.children().eq(0).html();
				if(roleName == role2) {
					break;
				}
			}
			$(".role_list").css("display","none");
			div.css("display","block");
		};
		
		$("#roleName").change(function(){
			var role1 = this.value;
			var divs = $(".role_list");
			var div;
			for(var i=0;i<divs.length;i++) {
				div = divs.eq(i);
				var role2 = div.children().eq(0).html();
				if(role1 == role2) {
					break;
				}
			}
			$(".role_list").css("display","none");
			div.css("display","block");
		});
		
	  	var msg = $("#input_hidden").val();
		if(msg != null) {
			alert(msg);
		};
	})
</script>
</head>

<body>
<input id="input_hidden" type="hidden" th:value="${msg}" th:if="${msg} != null"/>
	<div th:include="background/bg_common/bg_head"></div>
<!-- 顶部 -->              
<div id="middle">
     <div class="left">
<!-- 代码 开始 -->
<div th:include="background/bg_common/bg_nav"></div>
<!-- 代码 结束 -->


     </div>

     <div class="right"  id="mainFrame">
  
     <div class="right_cont">
<ul class="breadcrumb" th:if="${bgManager} == null">当前位置：添加管理员</ul>
<ul class="breadcrumb" th:if="${bgManager} != null">当前位置：修改管理员</ul>
<div style="width:900px; margin:auto; margin-top:100px;">
<form action="/manage/order/addManager" method="post">
	<input id="managerid" name="managerid" type="text" th:value="${bgManager.userid}" style="display:none;" th:if="${bgManager} != null"/>
	<input id="managername" type="text" th:value="${bgManager.username}" style="display:none;" th:if="${bgManager} != null"/>
	<input id="managerpassword" type="text" th:value="${bgManager.userpassword}" style="display:none;" th:if="${bgManager} != null"/>
	<input id="roleid" type="text" th:value="${role.rolename}" style="display:none;" th:if="${role} != null"/>
   <table class="table table-bordered" >
     <tr>
       <td width="12%" height="39" align="right" nowrap="nowrap" bgcolor="#f1f1f1">用&nbsp;户&nbsp;名：</td>
       <td width="38%"><input type="text" name="userName" id="userName" class="pawd_text"  /></td>
     </tr>
     <tr id="inputPassword">
       <td height="41" align="right" nowrap="nowrap" bgcolor="#f1f1f1">密&nbsp;&nbsp;码：</td>
       <td><input type="password" name="inputPasswd" id="inputPasswd" class="pawd_text"  /></td>
     </tr>
     <tr id="enterPassword">
       <td height="38" align="right" nowrap="nowrap" bgcolor="#f1f1f1">确认密码：</td>
       <td><input type="password" name="enterPasswd" id="enterPasswd" class="pawd_text"  /></td>       
     </tr>
      <tr>
       <td height="38" align="right" nowrap="nowrap" bgcolor="#f1f1f1">用户角色：</td>
       <td>
	       <select id="roleName" name="roleName" class="select_text">
	         <option th:each="bgRole:${bgRoleList}"  th:if="${bgRole} != null" th:text="${bgRole.rolename}">超级管理员</option>
	       </select>
       </td>       
     </tr>
     <tr>
       <td height="38" align="right" nowrap="nowrap" bgcolor="#f1f1f1">角色权限：</td>
       <td>
          <div class="role_list" th:each="actor:${actorList}" th:if="${actor} != null">
          	<div th:text="${actor.roleName}" hidden="hidden"></div>
            <dl th:each="roleAuthority:${actor.roleAuthorityList}" th:if="${roleAuthority} != null">
              <dt class="role_two" th:text="${roleAuthority.bgAuthority.authorityname}+':'"></dt>
              <dd>
	              <span th:each="minAuthority:${roleAuthority.bgAuthorityList}" th:text="'&nbsp;&nbsp;'+${minAuthority.authorityname}" style="float:left;" th:if="${minAuthority} != null"></span>
              </dd> 
            </dl>
          </div>
       </td>       
     </tr>     
   </table>
   <table  class="margin-bottom-20 table  no-border" >
        <tr>
     	<td class="text-center"><input type="submit" value="确定" class="btn btn-info " style="width:80px;"/></td>
     </tr>
 </table>
</form>
      
   </div> 
     </div>     
     </div>    
    </div>
</body>
</html>
